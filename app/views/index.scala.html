@(tickets: List[Ticket], ticketForm: Form[Ticket])

@import helper._

@main("Defect Tracking System") {

	<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	
	<div class="jumbotron">
        <h2>Defect Tracking System</h2>
        <p class="pull-right">... log and keep track of defects easily!
    </div>
    
	<style>
		.table th{
		    text-align:center;
		}
	</style>
	
	<div ng-app="myApp" ng-controller="appCtrl">
    	
    	<div class="form-group">
    		<div>
            	<center><input type="text" name="searchById" id="searchById" ng-model="searchById">
                <button type="submit" ng-click="toggleSearch(searchById)" class="btn btn-primary" id="btn_create" align="center"><span class="glyphicon glyphicon-search"></span> Search Ticket By ID</button></center>
            </div>
            <br>
            <div>
                <button type="submit" ng-click="toggleAdd()" class="btn btn-primary btn-block" id="btn_create">Log Ticket</button>
            </div>
            <br>
            <div>
                <button type="submit" ng-click="toggleShow()" class="btn btn-primary btn-block" id="btn_create">View / Update / Delete Tickets</button>
            </div>
            <br>
            <div>
                <button type="submit" ng-click="toggleAssign()" class="btn btn-primary btn-block" id="btn_create">Assign Ticket</button>
            </div>
            <br>
        </div>
    	
		<div ng-show="addView">	    
		    @form(routes.Application.newTicket()) {
		    <p ng-show="false">
		    	<h2>Create New Ticket</h2>
		        <table style="width:100%; border: 1px solid black; border-collapse: collapse;">
					<tr> 
						<label id="lbl_customerInfo" for="customerInfo" class="col-sm-4 control-label">Customer Information</label>
			            <div class="col-sm-8">
			                <input type="text" class="form-control" name="customerInfo" id="customerInfo" placeholder="" ng-model="customerInfo" required>
			            </div>
					</tr>
					<tr> 
						<label id="lbl_comments" for="comments" class="col-sm-4 control-label">Comments</label>
			            <div class="col-sm-8">
			                <textarea class="form-control" name="comments" id="comments" placeholder="" ng-model="comments" required></textarea>
			            </div>
					</tr>
					<tr> 
						<label id="lbl_createdBy" for="createdBy" class="col-sm-4 control-label">Created By</label>
			            <div class="col-sm-8">
			                <select class="form-control" name="createdBy" id="createdBy" placeholder="" ng-model="createdBy" required>
			                	<option value="" class="btn dropdown-toggle">--Select--</option>
			                	<option value="{{user.userName}}" class="btn dropdown-toggle" ng-repeat="user in users">{{ user.userName }}</option>
			                </select>
			            </div>
					</tr>
					<tr> 
						<label id="lbl_status" for="status" class="col-sm-4 control-label">Status</label>
			            <div class="col-sm-8">
			                <input type="text" class="form-control" name="status" id="status" placeholder="" ng-model="status" readonly>
			                	{{$scope.status}}
			            </div>
					</tr>
				</table> 
				
				<br>
				<div class="col-sm-offset-4 col-sm-8 text-right">
	                <button type="submit" class="btn btn-success" id="btn_create" style="width: 150px;" value="Create"><span class="glyphicon glyphicon-save"></span> Submit Ticket</button>
	            </div>
			</p>
		    }
		</div>
    
		<div ng-show="showView">
			<div class="container">
		    <h2>@tickets.size() ticket(s)</h2>
    		<table class="table table-striped table-bordered table-hover .table-condensed">
				    <thead>
				      <tr>
				      	<th>ID</th>
				        <th>Customer Information</th>
				        <th>Comments</th>
				        <th>Created By</th>
				        <th>Status</th>
				        <th>Assigned To</th>
				        <th>Action</th>
				      </tr>
				    </thead>
				    <tbody>
	        		
	        		@for(ticket <- tickets) {
				 
				      <tr>
				      	<td>@ticket.id</td>
						<td>@ticket.customerInfo</td>
						<td>@ticket.comments</td>
						<td>@ticket.createdBy</td>
						<td>@ticket.status</td>
						<td>@ticket.assignTo</td>
						<td>
							@form(routes.Application.deleteTicket(ticket.id)) {
			                    <button type="submit" class="btn btn-danger" style="width: 300px;" id="btn_create" value="Delete" onclick="return confirm('Are you sure you want to do this? \nYou will not be able to recover this data.')" ><span class="glyphicon glyphicon-minus-sign"></span> Delete This Ticket</button>
			                }
			                <br>			                
			               	<button ng-click="toggleUpdateTicket('@ticket.id', '@ticket.customerInfo', '@ticket.comments', '@ticket.createdBy', '@ticket.status', '@ticket.assignTo')" class="btn btn-success" style="width: 300px;" id="btn_create"><span class="glyphicon glyphicon-share-alt"></span> View / Update This Ticket</button>							
						</td>
				      </tr>
			        }
			     </tbody>
			</table>
			</div>
		</div>
		
		<div ng-show="assignView">
			<div class="container">
    		<table class="table table-striped table-bordered table-hover .table-condensed">
				    <thead">
				      <tr>
				      	<th>ID</th>
				        <th>Customer Information</th>
				        <th>Comments</th>
				        <th>Created By</th>
						<th>Status</th>
						<th>Assinged To</th>
				        <th>Action</th>
				      </tr>
				    </thead>
				    <tbody>
	        		
	        		@for(ticket <- tickets) {
	        		  @if(ticket.status != "Close") {
				      <tr>
				      	<td>@ticket.id</td>
						<td>@ticket.customerInfo</td>
						<td>@ticket.comments</td>
						<td>@ticket.createdBy</td>
						<td>@ticket.status</td>
						<td>@ticket.assignTo</td>
						<td>
			            	<button ng-click="toggleAssignTicket('@ticket.id', '@ticket.customerInfo', '@ticket.comments', '@ticket.createdBy')" class="btn btn-success" id="btn_create"><span class="glyphicon glyphicon-user"></span> Assign This Ticket</button>
						</td>
				      </tr>
						}
			        }
			     </tbody>
				</table>
				</div>
		</div>
		
		<div ng-show="assignFields">
			@form(routes.Application.assign()) {
		    	<h2>Assign This Ticket</h2>
		        <table style="width:100%; border: 1px solid black; border-collapse: collapse;">
		        	<tr> 
						<label id="lbl_customerInfo" for="id" class="col-sm-4 control-label">Ticket ID</label>
			            <div class="col-sm-8">
			                <input type="text" class="form-control" name="id" id="id" placeholder="" ng-model="assignId" readonly>
			                	{{$scope.assignId}}
			            </div>
					</tr>
					<tr> 
						<label id="lbl_customerInfo" for="customerInfo" class="col-sm-4 control-label">Customer Information</label>
			            <div class="col-sm-8">
			                <input type="text" class="form-control" name="customerInfo" id="customerInfo" placeholder="" ng-model="assignCustomerInfo" required>
			                	{{$scope.assignCustomerInfo}}
			            </div>
					</tr>
					<tr> 
						<label id="lbl_comments" for="comments" class="col-sm-4 control-label">Comments</label>
			            <div class="col-sm-8">
			                <textarea class="form-control" name="comments" id="comments" placeholder="" ng-model="assignComments" required>
			                	{{$scope.assignComments}}
			                </textarea>
			            </div>
					</tr>
					<tr> 
						<label id="lbl_createdBy" for="createdBy" class="col-sm-4 control-label">Created By</label>
			            <div class="col-sm-8">
			                <input type="text" class="form-control" name="createdBy" id="createdBy" placeholder="" ng-model="assignCreatedBy" required readonly>
			                	{{$scope.assignCreatedBy}}
			            </div>
					</tr>
					<tr> 
						<label id="lbl_status" for="status" class="col-sm-4 control-label">Status</label>
			            <div class="col-sm-8">
			                <input type="text" class="form-control" name="status" id="status" placeholder="" ng-model="assignStatus" readonly>
			                	{{$scope.status}}
			            </div>
					</tr>
					<tr> 
						<label id="lbl_status" for="assignTo" class="col-sm-4 control-label">Assign To</label>
			            <div class="col-sm-8">
			                 <select class="form-control" name="assignTo" id="assignTo" placeholder="" ng-model="assignTo" required>
			                	<option value="" class="btn dropdown-toggle">--Select--</option>
			                	<option value="{{user.userName}}" class="btn dropdown-toggle" ng-repeat="user in users">{{ user.userName }}</option>
			                </select>
			            </div>
					</tr>
				</table> 
				<br>
				<div class="col-sm-offset-4 col-sm-8 text-right">
	                <button type="submit" class="btn btn-success" style="width: 150px;" id="btn_create" value="Assign"><span class="glyphicon glyphicon-user"></span> Assign Ticket</button>
	            </div>
	            <br> <br>
		    }
		    	<div class="col-sm-offset-4 col-sm-8 text-right">
					<button ng-click="closeAllViews()" class="btn btn-warning" style="width: 150px;" id="btn_create" value="">Cancel</button>
	            </div>
		</div>
		
		<div ng-show="updateView">
			@form(routes.Application.assign()) {
		    	<h2>Update This Ticket</h2>
		    	<input type="hidden" name="editable" id="editable" ng-model="editable"> {{$scope.editable}}
		        <table style="width:100%; border: 1px solid black; border-collapse: collapse;">
		        	<tr> 
						<label id="lbl_customerInfo" for="id" class="col-sm-4 control-label">Ticket ID</label>
			            <div class="col-sm-8">
			                <input type="text" class="form-control" name="id" id="id" placeholder="" ng-model="updateId" readonly>
			                	{{$scope.updateId}}
			            </div>
					</tr>
					<tr> 
						<label id="lbl_status" for="status" class="col-sm-4 control-label">Status</label>
			            <div class="col-sm-8">
			                 <select class="form-control" name="status" id="status" placeholder="" ng-model="updateStatus" ng-init="{{$scope.updateStatus}}" ng-disabled="editable" required>
			                	<option value="New" class="btn dropdown-toggle">New</option>
			                	<option value="Open" class="btn dropdown-toggle">Open</option>
			                	<option value="Close" class="btn dropdown-toggle">Close</option>
			                 </select>
			            </div>
					</tr>
					<tr> 
						<label id="lbl_customerInfo" for="customerInfo" class="col-sm-4 control-label">Customer Information</label>
				            <div class="col-sm-8">
				                <input type="text" class="form-control" name="customerInfo" id="customerInfo" placeholder="" ng-model="updateCustomerInfo" ng-disabled="editable" required>
				                	{{$scope.updateCustomerInfo}} 
				            </div>
					</tr>
					<tr> 
						<label id="lbl_comments" for="comments" class="col-sm-4 control-label">Comments</label>
			            <div class="col-sm-8">
			                <textarea class="form-control" name="comments" id="comments" placeholder="" ng-model="updateComments" ng-disabled="editable" required>
			                	{{$scope.updateComments}}
			                </textarea>
			            </div>
					</tr>
					<tr> 
						<label id="lbl_createdBy" for="createdBy" class="col-sm-4 control-label">Created By</label>
			            <div class="col-sm-8">
			                <input type="text" class="form-control" name="createdBy" id="createdBy" placeholder="" ng-model="updateCreatedBy" ng-disabled="editable" required readonly>
			                	{{$scope.updateCreatedBy}}
			            </div>
					</tr>
					<tr> 
						<div ng-show="editable">
							<label id="lbl_createdBy" for="assignTo" class="col-sm-4 control-label">Assigned To</label>
				            <div class="col-sm-8">
				                <input type="text" class="form-control" name="assignTo" id="assignTo" placeholder="" ng-model="updateAssignTo" ng-disabled="editable">
				                	{{$scope.updateAssignTo}}
				            </div>
			            </div>
					</tr>
				</table> 
				<br>
				<div class="col-sm-offset-4 col-sm-8 text-right">
	                <button type="submit" class="btn btn-success" style="width: 150px;" id="btn_create" value="Assign" ng-disabled="editable"><span class="glyphicon glyphicon-pencil"></span> Update Ticket</button>
	            </div>
	            <br> <br>
		    }
			    <div class="col-sm-offset-4 col-sm-8 text-right">
					<button ng-click="closeAllViews()" class="btn btn-warning" style="width: 150px;" id="btn_create" value="">Cancel</button>
	            </div>
		</div>
		
	</div>
	
	<script src= "assets/controller.js"></script>
}